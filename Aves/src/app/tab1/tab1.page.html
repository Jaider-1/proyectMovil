<ion-content>
  <div class="content-wrapper">
    <div class="table-container">
      <h2>Catálogo de Aves</h2>

      <ion-button (click)="openForm()">Agregar Ave</ion-button>

      <table>
        <thead>
          <tr>
            <th>Código</th>
            <th>Nombre Común</th>
            <th>Nombre Científico</th>
            <th>Especie</th>
            <th>Hábitat</th>
            <th>Municipio</th>
            <th>Acciones</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let ave of aves; let i = index">
            <td>{{ ave.codigo }}</td>
            <td>{{ ave.nombreComun }}</td>
            <td>{{ ave.nombreCientifico }}</td>
            <td>{{ ave.especie }}</td>
            <td>{{ ave.habitat }}</td>
            <td>{{ ave.municipio }}</td>
            <td>
              <ion-button (click)="editAve(i)">Editar</ion-button>
              <ion-button (click)="deleteAve(i)">Eliminar</ion-button>
            </td>
          </tr>
        </tbody>
      </table>
    </div>

    <!-- Formulario para agregar o editar -->
    <div *ngIf="isFormOpen">
      <ion-input [(ngModel)]="form.codigo" placeholder="Código"></ion-input>
      <ion-input [(ngModel)]="form.nombreComun" placeholder="Nombre Común"></ion-input>
      <ion-input [(ngModel)]="form.nombreCientifico" placeholder="Nombre Científico"></ion-input>

      <ion-item>
        <ion-label>Especie</ion-label>
        <ion-select [(ngModel)]="form.especie" placeholder="Selecciona una especie">
          <ion-select-option *ngFor="let especie of especies" [value]="especie.nombreCientifico">
            {{ especie.nombreComun }}
          </ion-select-option>
        </ion-select>
      </ion-item>

      <ion-item>
        <ion-label>Hábitat</ion-label>
        <ion-select [(ngModel)]="form.habitat" placeholder="Selecciona un hábitat">
          <ion-select-option *ngFor="let habitat of habitats" [value]="habitat.tipoHabitat">
            {{ habitat.tipoHabitat }}
          </ion-select-option>
        </ion-select>
      </ion-item>

      <ion-item>
        <ion-label>Municipio</ion-label>
        <ion-select [(ngModel)]="form.municipio" placeholder="Selecciona un municipio">
          <ion-select-option *ngFor="let municipio of municipios" [value]="municipio.nombre">
            {{ municipio.nombre }}
          </ion-select-option>
        </ion-select>
      </ion-item>

      <ion-button (click)="saveAve()">Guardar</ion-button>
      <ion-button (click)="closeForm()">Cancelar</ion-button>
    </div>
  </div>
</ion-content>
